<Window x:Class="ImageOrganizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
		MinWidth="333"
        Title="Image Organizer" 
		Height="350"
		Width="525">
	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="Presentation/Styles.xaml"/>
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Window.Resources>
	<Window.InputBindings>
		<!--<KeyBinding Key="Escape" Command="{Binding }"/>-->
	</Window.InputBindings>
		
    <Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition/>
			<RowDefinition Height="Auto"/>
			<RowDefinition/>
		</Grid.RowDefinitions>
		<Grid Margin="5"
			Grid.Row="0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>
			<TextBox Text="{Binding FolderPath}"
					 MinWidth="400"
					 Grid.Column="0"
					 Margin="0,0,8,0"
					 IsReadOnly="True"/>
			<Button Command="{Binding BrowseCommand}"
			        Grid.Column="1"
			        Style="{StaticResource UniformButtonStyle}"
			        Content="Browse..."/>
		</Grid>
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition MinWidth="100"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>
			<ListBox ItemsSource="{Binding Files}"
					 SelectedIndex="{Binding CurrentIndex}"
					 Grid.Column="0">
				
			</ListBox>
			<Button Grid.Column="1"
					Command="{Binding LeftCommand}"
					Style="{StaticResource ArrowButtonStyle}">
				
			</Button>
			<StackPanel DataContext="{Binding CurrentImage}"
						Grid.Column="2">
				<TextBlock Text="{Binding FileName, Mode=OneWay}"
						 HorizontalAlignment="Center"/>
				<Image Source="{Binding Source}"/>
			</StackPanel>
			<Button Grid.Column="3"
			        Command="{Binding RightCommand}"
			        Style="{StaticResource ArrowButtonStyle}">

			</Button>
		</Grid>
		<StackPanel Grid.Row="2">
			<TextBox Text="Tags"/>
			<Separator Margin="4,0,4,4"/>
		</StackPanel>
		<Grid Grid.Row="3">
			<Grid.RowDefinitions>
				<RowDefinition Height="35"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>
			<ScrollViewer HorizontalScrollBarVisibility="Auto"
						  VerticalAlignment="Center"
						  VerticalScrollBarVisibility="Hidden">
				<ItemsControl ItemsSource="{Binding Tags}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<StackPanel Orientation="Horizontal"/>
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border BorderBrush="DeepSkyBlue"
									BorderThickness="1"
							        Margin="4"
							        MinWidth="50"
							        Background="DodgerBlue">
								<Grid>
									<Grid.ColumnDefinitions>
										<ColumnDefinition/>
										<ColumnDefinition Width="Auto"/>
									</Grid.ColumnDefinitions>
									<TextBlock Text="{Binding Name}"
											   Foreground="AliceBlue"
											   VerticalAlignment="Center"
											   Grid.Column="0"
											   Margin="0,0,4,0"/>
									<Button Command="{Binding RemoveCommand}"
											Grid.Column="1"
									        Content="X"
									        Width="25"
									        Height="25"/>
								</Grid>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>
			<Grid Grid.Row="1"
			      Margin="5,0,5,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>
				<TextBox Text="{Binding NewTagName, UpdateSourceTrigger=PropertyChanged}"
				         MinWidth="100"
						 Grid.Column="0"
						 Margin="0,0,8,0"/>
				<Button Content="Add"
				        Grid.Column="1"
						Style="{StaticResource UniformButtonStyle}"
						Command="{Binding NewTagCommand}"/>
			</Grid>
		</Grid>
    </Grid>
</Window>
